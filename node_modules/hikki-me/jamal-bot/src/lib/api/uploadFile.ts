import fs from 'fs'
import FormData from 'form-data'
import axios from 'axios'
export const uploadFile = async (path: string, custom = false): Promise<{ url: string }> => {
  return new Promise(async (resolve, reject) => {
    const bodyForm = new FormData()
    bodyForm.append('recfile', fs.createReadStream(path))
    await axios(`https://file.hikki.me/upload${typeof custom == 'string' ? `?name=${custom}` : ''}`, {
      method: 'POST',
      data: bodyForm,
      headers: {
        accept: '*/*',
        'accept-language': 'en-US,en;q=0.9,id;q=0.8',
        'content-type': `multipart/form-data; boundary=${bodyForm.getBoundary()}`,
      },
    })
      .then(({ data }) => {
        // console.log(data.file)
        resolve(data)
      })
      .catch((e) => console.log(e))
  })
}
