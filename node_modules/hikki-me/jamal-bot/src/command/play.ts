import { Youtube } from '../lib/api/youtube'
import { ICommand, IMessage } from '../Types'

export let handler: ICommand = async (m: IMessage, { args, jamal }): Promise<any> => {
  const query = args.join(' ')
  if (!query) return m.reply('please provide a query')
  const data = await Youtube.search(query)
  if (!data.videos.length) m.reply('no results')
  let menu = '*( ðŸ“Œ Youtube Play ðŸ“Œ )*\n\n'
  menu += '*ðŸ”– Title:* ' + data.videos[0].title + '\n'
  menu += '*ðŸ”— URL:* ' + data.videos[0].url + '\n'
  menu += '*ðŸ“ Description:* ' + data.videos[0].description + '\n'
  menu += '*â± Duration:* ' + data.videos[0].duration.toString() + '\n'
  menu += '*ðŸ“² Views:* ' + data.videos[0].views + '\n'
  menu += '*ðŸ“ Uploaded:* ' + data.videos[0].ago + '\n'
  menu += '*ðŸŽ« Author:* ' + data.videos[0].author + '\n'
  menu += '\n\n( ðŸ“Œ JAMAL BOT ðŸ“Œ )'
  jamal.sendTWithUrlButton(m.chat, true, menu, 'pilih format media', ['Show Video âœ¨', data.videos[0].url, 'VIDEO ðŸ’¾', '.ytmp4 ' + data.videos[0].url, 'AUDIO ðŸ’¾', '.ytmp3 ' + data.videos[0].url], null, data.videos[0].thumbnail)
}
handler.command = /^(play|putar)$/i
handler.help = ['play', 'putar'].map((x) => `${x} <query>`)
handler.tags = ['downloader']
