import { readFileSync } from 'fs'
import { ICommand, IMessage } from '../Types'
import { toAudio, toBuffer } from '../Utils'
import fetch from 'node-fetch'
export let handler: ICommand = async (m: IMessage, { args, jamal }): Promise<any> => {
  let is = args.length > 0 ? (await toBuffer(args[0])).buffer : m.isMedia ? await m.download() : m.quoted.isMedia ? await m.quoted.download() : null
  if (is === null) return m.reply('Please provide a url or media')
  m.reply(await toAudio(is))
}
handler.tags = ['downloader']
handler.command = /^(tomusic|tomp3)$/i
handler.help = ['tomp3', 'tomusic'].map((x) => `${x} <url>`)
