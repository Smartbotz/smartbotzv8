import { tiktok } from '../lib/api/tiktok'
import { ICommand, IMessage } from '../Types'
import { to1k } from '../Utils'

export let handler: ICommand = async (m: IMessage, { args, jamal }): Promise<any> => {
  if (args.length < 1) return m.reply('Masukan URL TikTok')
  const json = await new tiktok().getVideo(args[0])
  jamal.send3Button(m.chat, true, `*ðŸ“Œ  T I K T O K   V I D E O ðŸ“Œ*\n\n*ðŸ“ Title* : ${json.title}\n*ðŸ“ Author* : ${json.author.nickname}\n*ðŸ“ Tags* : ${json.keywords}\n*ðŸ“ Info* : ${json.desc}\n*ðŸ“ Description* : ${json.description}\n*ðŸ“ Music* : ${json.music.title}\n*ðŸ“ Stat:*\n *- like:* ${json.description.split(',')[0]}\n *- comment* : ${to1k(json.stats.commentCount) + ' Komentar'}\n *- play* : ${to1k(json.stats.playCount) + ' Diputar'}\n *- share* : ${to1k(json.stats.shareCount) + ' Dibagikan'}`, '@hardianto02_', ['VIDEO ðŸ’¾', json.video.playAddr, 'AUDIO ðŸ’¾', json.music.playUrl], null, json.video.cover)
}
handler.tags = ['downloader']
handler.command = /^(tiktok|tik)$/i
handler.help = ['tiktok']
