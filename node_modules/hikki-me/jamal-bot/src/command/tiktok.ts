import { tiktok } from '../lib/api/tiktok'
import { ICommand, IMessage } from '../Types'
import { to1k } from '../Utils'

export let handler: ICommand = async (m: IMessage, { args, jamal }): Promise<any> => {
  if (args.length < 1) return m.reply('Masukan URL TikTok')
  const json = await new tiktok().getVideo(args[0])
  jamal.send3Button(m.chat, true, `*📌  T I K T O K   V I D E O 📌*\n\n*📍 Title* : ${json.title}\n*📍 Author* : ${json.author.nickname}\n*📍 Tags* : ${json.keywords}\n*📍 Info* : ${json.desc}\n*📍 Description* : ${json.description}\n*📍 Music* : ${json.music.title}\n*📍 Stat:*\n *- like:* ${json.description.split(',')[0]}\n *- comment* : ${to1k(json.stats.commentCount) + ' Komentar'}\n *- play* : ${to1k(json.stats.playCount) + ' Diputar'}\n *- share* : ${to1k(json.stats.shareCount) + ' Dibagikan'}`, '@hardianto02_', ['VIDEO 💾', json.video.playAddr, 'AUDIO 💾', json.music.playUrl], null, json.video.cover)
}
handler.tags = ['downloader']
handler.command = /^(tiktok|tik)$/i
handler.help = ['tiktok']
