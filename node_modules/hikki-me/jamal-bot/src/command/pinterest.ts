import { Pinterest } from '../lib/api/pinterest'
import { ICommand, IMessage } from '../Types'

export let handler: ICommand = async (m: IMessage, { args, jamal }): Promise<any> => {
  const query = args.join(' ')
  if (!query) return m.reply('please provide a query')
  const data = await new Pinterest().search(query)
  if (!data.length) m.reply('no results')
  const isPick = data[Math.floor(Math.random() * data.length)]
  jamal.sendTButton(m.chat, true, `*Hasil pencarian ${query}*`, 'Gambar Tidak Akurat?\nMasukan Query Dengan Tepat', ['NEXT PAGE ðŸ”„', '/pinterest ' + query], null, isPick)
}
handler.command = /^(pinterest|pin)$/i
handler.help = ['pinterest'].map((x) => `${x} <reply media>`)
handler.tags = ['search']
