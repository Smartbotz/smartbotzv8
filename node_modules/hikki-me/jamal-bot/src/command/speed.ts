import { ICommand, IMessage } from '../Types'
import { exec, spawn } from 'child_process'
export let handler: ICommand = async (m: IMessage, { args }) => {
  exec('speed-test --json', (err, stdout, stderr) => {
    if (err) {
      m.react('❌')
      return m.reply('owner belum install speed-test')
    }
    let data = JSON.parse(stdout)
    let msg = ` *( 🏎 Speed Test 🏎 )*
Ping: ${data.ping}ms
Download: ${data.download}Mbit/s
Upload: ${data.upload}Mbit/s`
    m.reply(msg)
  })
}
handler.tags = ['owner']
handler.help = ['speed']
handler.command = /^speed$/
